{%extends "base.html"%}
{%block content%}
<main>
    <header>
        <nav>
           <ul class = "sub-menu">
                <li><a href="/transactions">Back</a></li>
                <li><a href="/transactions/new">Add New Transaction</a></li>
           </ul> 
        </nav>
    </header>
    <h2>All Transactions</h2>
        <div class="table">
            <table>
                <tr>
                    <th><a href="/transactions/date">Name</a></th>
                    <th><a href="/transactions/cost">Cost</a></th>
                    <th><a href="/transactions">Date</a></th>
                    <th>Category </th>
                    <th>Vendor</th>
                    <th>Monthly Transaction?</th>
                    <th>Notes</th>
                    <th>Edit</th>
                    <th>Delete</th>

                </tr>
                {% for transaction in transactions %}
                <tr>
                    <td><a href="/transactions/{{transaction.id}}">{{transaction.name}}</a></td>
                    <td>Â£{{transaction.cost}}</td>
                    <td>{{transaction.date.strftime("%d/%m/%Y")}}</td>
                    <td>{{transaction.category.name}}</td>
                    <td>{{transaction.vendor.name}}</td>
                    <td>{{transaction.monthly_recurring}}</td>
                    {%if transaction.notes == "None"%} <td></td>
                    {%elif transaction.notes == None%} <td></td>
                    {%else%}
                        <td>{{transaction.notes}}</td>
                    {%endif%}
                    <td> 
                        <form action="/transactions/edit/{{transaction.id}}">
                            <button class="edit" type="submit">Edit</button>
                        </form>
                    </td>
                    <td>
                        <form action="/transactions/delete/{{transaction.id}}" method="POST">
                            <button class="delete" type="submit">Delete</button>
                        </form>
                    </td>
                </tr>
                {%endfor%}
            </table>
        </div>
        <div>
            <form action="/transactions/new">
                <button type="submit">Add a New Transaction</button>
            </form>
        </div>
</main>


{%endblock%}