{%extends "base.html"%}
{%block content%}
<main>
    <header>
        <nav>
           <ul class = "sub-menu">
                <li><a href="/categories/new">Add New Category</a></li>
                <li><a href="/vendors/new">Add New Vendor</a></li>
           </ul> 
        </nav>
    </header>
    <h2>View Category</h2>
    <div class="table">
        <table>
            <tr>
                <th>Name</th>
                <th>Active? </th>
                <th>Edit</th>
            </tr>
            <tr>
                <td>{{category.name}}</td>
                <td>{{category.active}}</td>
                <td>
                    <form action="/categories/edit/{{category.id}}">
                        <button type="submit">Edit</button>
                    </form>
                </td>
            </tr>
        </table>
    <h2>Transactions Linked to This Category</h2>
    <div class="table">
        <table>
            <tr>
                <th>Name</th>
                <th>Cost </th>
                <th>Date</th>
                <th>Category </th>
                <th>Vendor</th>
                <th>Monthly Transaction?</th>
                <th>Notes</th>
                <th>Edit</th>
                <th>Delete</th>

            </tr>
            {% for transaction in transactions %}
            <tr>
                <td><a href="/transactions/{{transaction.id}}">{{transaction.name}}</a></td>
                <td>{{transaction.cost}}</td>
                <td>{{transaction.date.strftime("%d/%m/%Y")}}</td>
                <td>{{transaction.category.name}}</td>
                <td>{{transaction.vendor.name}}</td>
                <td>{{transaction.monthly_recurring}}</td>
                {%if transaction.notes == "None"%} <td></td>
                {%elif transaction.notes == None%} <td></td>
                {%else%}
                    <td>{{transaction.notes}}</td>
                {%endif%}
                <td> 
                    <form action="/transactions/edit/{{transaction.id}}">
                        <button class="edit" type="submit">Edit</button>
                    </form>
                </td>
                <td>
                    <form action="/transactions/delete/{{transaction.id}}" method="POST">
                        <button class="delete" type="submit">Delete</button>
                    </form>
                </td>
            </tr>
            {%endfor%}
        </table>
        
    </div>
</main>


{%endblock%}